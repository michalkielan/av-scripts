#!/bin/bash

# bootstrap script detects the user's shell and appends the appropriate
# configuration file. It adds the 'av-scripts/scripts' directory to the `PATH`,
# making the scripts accessible globally.

PROJECT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

SHELL_NAME=$(basename "$SHELL")

if [[ "$SHELL_NAME" == "bash" ]]; then
    CONFIG_FILE="$HOME/.bashrc"
elif [[ "$SHELL_NAME" == "zsh" ]]; then
    CONFIG_FILE="$HOME/.zshrc"
else
    echo "Unsupported shell: $SHELL_NAME. Please use bash or zsh."
    exit 1
fi

echo "# Generated by $PROJECT_DIR/bootstrap" >> "$CONFIG_FILE"
echo "export PATH=\"\$PATH:$PROJECT_DIR/scripts\"" >> "$CONFIG_FILE"

echo "Added $PROJECT_DIR/scripts to your PATH in $CONFIG_FILE."
echo "Please restart your terminal or run 'source $CONFIG_FILE' to apply changes."
